<!DOCTYPE html>
<html lang="en">
    <%- include('partials/head') -%> 
    <body>
        <div class="container-fluid">
            <div class="row">
                <%- include('partials/sidebar') -%> 
                <div class="col-sm-10">
                   <h1> Author: <%= author.name %>  </h1>
                   <p><%= author.lifespan %> </p>

                   <% if (author_books.length) { %> 
                        <p>
                            <strong class='text-danger'>Must delete the following books before deleting this author:</strong>
                        </p>

                        <div>
                            <h4>Books: </h4>
                            <dl>
                                <% author_books.forEach(book => { %>
                                    <dt>
                                        <a href="<%= book.url %> "><%= book.title %> </a>
                                    </dt>
                                    <dd><%= book.summary %> </dd>
                                <% }) %> 
                            </dl>
                            
                        </div>
                   <% } else {%> 
                        <p>Are you sure you want to delete this author?</p>
                        <form action="" method="post">
                            <div class="form-group">
                                <input 
                                    id="authorid" 
                                    class="form-control"
                                    type="hidden"
                                    name='authorid'
                                    required
                                    value=<%= author._id %> 
                                >
                            </div>

                            <button class="btn btn-primary" type="submit">Submit</button>
                        </form>
                   <% } %> 
                </div>
            </div>
        </div>
    </body>
</html>